<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link th:href="@{../css/style.css}" rel="stylesheet" type="text/css" href="../static/css/style.css" >



    <script>
        function createTable() {
            let tablebody = document.getElementById('mainTable').getElementsByTagName('tbody')[0]
            for (let hours = 0; hours < 25; hours++) {
                let row = tablebody.insertRow();
                let timeCell = row.insertCell();
                timeCell.innerHTML = hours + ":00";
                for (let dayOfWeek = 1; dayOfWeek < 7; dayOfWeek++) {
                    emptyCell = row.insertCell();
                    emptyCell.classList.add("emptyCell");
                    emptyCell.onclick = () => {
                        let result = confirm("Do you want to create a new event?");
                        if( result == true ) {
                            let url = "/new";
                            document.location.href = url, true;
                            return true;
                        }
                        return false;
                    }
                }
            }
        }
    </script>

    </head>
<body>
<table>
    <tr>
        <td><h1 style="text-align:left">Meet Room</h1></td>
        <td style="text-align:right"><h2 th:text="${username}">Username</h2></td>
    </tr>
</table>
<table id="mainTable" class="calendarTable">
    <thead>
    <tr>
        <th width="10%" rowspan="2">Time</th>
        <th >Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
        <th>Saturday</th>
    </tr>
    <tr>
        <th th:text="${firstDayOfWeek.toString()}">01-01-2020</th>
        <th th:text="${firstDayOfWeek.plusDays(1)}">01-01-2020</th>
        <th th:text="${firstDayOfWeek.plusDays(2)}">01-01-2020</th>
        <th th:text="${firstDayOfWeek.plusDays(3)}">01-01-2020</th>
        <th th:text="${firstDayOfWeek.plusDays(4)}">01-01-2020</th>
        <th th:text="${firstDayOfWeek.plusDays(5)}">01-01-2020</th>
    </tr>
    </thead>
    <tbody>
    <script>
        createTable();
    </script>
    </tbody>
    <script  th:inline="javascript">
        let dayOfWeek, hour, cell;
        [# th:each="meeting:${meetings}"]
            dayOfWeek = [[${meeting.getStartTime().getDayOfWeek().getValue()}]]
            hour = [[${meeting.getStartTime().getHour()}]]
            cell = document.getElementById('mainTable').rows[hour + 1].cells[dayOfWeek];
            cell.innerHTML = [[${meeting.getShortDescription()}]];
            cell.id = [[${meeting.id}]];
            cell.classList.add("busyCell");
            cell.onclick = (cell) => {
                alert([[${meeting.getFullDescription()}]]);
            };
        [/]
    </script>
</table>
<ul class="pager">
    <li><a href="#" th:href="'/?date=' + ${firstDayOfWeek.minusWeeks(1)}">Previous</a></li>
    <li><a href="#" th:href="'/?date=' + ${firstDayOfWeek.plusWeeks(1)}">Next</a></li>
</ul>
</body>
</html>